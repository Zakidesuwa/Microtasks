import{d as E,a as m,n as Re,f as j}from"../chunks/vthok_eK.js";import"../chunks/DjKZgApb.js";import{ag as Ht,am as Ee,an as Ut,ah as B,g as e,ai as Lt,aj as r,v as Te,K as u,s as o,ak as l,ae as Ze,al as d}from"../chunks/BzRJZXn9.js";import{e as z,s as L}from"../chunks/DexkCHB1.js";import{i as C}from"../chunks/e8VI5U1H.js";import{b as It,s as Dt,r as St}from"../chunks/BBI8m-aS.js";import{s as i}from"../chunks/BTrMBUsU.js";import{t as Vt,a as $t}from"../chunks/DoonBkoh.js";import{i as Bt}from"../chunks/Bq-VOS1f.js";import{p as Et}from"../chunks/BotH8uJD.js";import{s as Tt,a as Zt}from"../chunks/CQ-rNl5F.js";import{o as Ft}from"../chunks/CRjAGTYJ.js";import{p as Nt}from"../chunks/DA7Cc7Tm.js";import{g as Rt}from"../chunks/BRtj5TtV.js";import{b as jt}from"../chunks/Bt-Xh7oU.js";import{q as Wt}from"../chunks/iVSWiVfi.js";import{o as qt,a as w,d as re,e as le,g as Ot,r as Fe,f as Ne,u as Gt,h as Yt,i as Kt,j as Qt,k as Jt,l as Xt,m as ea}from"../chunks/Hc-2lIR6.js";var ta=E('<div class="fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-md z-[100] svelte-1d7fo4d" role="alert"><strong class="font-bold svelte-1d7fo4d">Error:</strong> <span class="block sm:inline svelte-1d7fo4d"> </span> <button class="absolute top-0 bottom-0 right-0 px-4 py-3 svelte-1d7fo4d" aria-label="Close error"><span class="text-xl svelte-1d7fo4d">Ã—</span></button></div>'),aa=E('<div id="sidebar"><div class="svelte-1d7fo4d"><div><img src="/logonamin.png" alt="Microtask Logo" class="w-8 h-8 svelte-1d7fo4d"> <h1>Microtask</h1></div> <nav class="flex flex-col gap-2 svelte-1d7fo4d"><a href="/home"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 svelte-1d7fo4d" aria-hidden="true"><path d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z" class="svelte-1d7fo4d"></path><path d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z" class="svelte-1d7fo4d"></path></svg> <span class="svelte-1d7fo4d">Home</span></a> <a href="/dashboard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 svelte-1d7fo4d" aria-hidden="true"><path d="M10.5 4.5a1.5 1.5 0 00-3 0v15a1.5 1.5 0 003 0V4.5z" class="svelte-1d7fo4d"></path><path d="M4.5 10.5a1.5 1.5 0 000 3h15a1.5 1.5 0 000-3h-15z" class="svelte-1d7fo4d"></path><path fill-rule="evenodd" d="M1.5 3A1.5 1.5 0 013 1.5h18A1.5 1.5 0 0122.5 3v18a1.5 1.5 0 01-1.5 1.5H3A1.5 1.5 0 011.5 21V3zm1.5.75v16.5h16.5V3.75H3z" clip-rule="evenodd" class="svelte-1d7fo4d"></path></svg> <span class="svelte-1d7fo4d">Dashboard</span></a> <a href="/tasks"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 svelte-1d7fo4d" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z" class="svelte-1d7fo4d"></path></svg> <span class="svelte-1d7fo4d">All Tasks</span></a> <a href="/calendar"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 svelte-1d7fo4d" aria-hidden="true"><path fill-rule="evenodd" d="M6.75 2.25A.75.75 0 017.5 3v1.5h9V3A.75.75 0 0118 3v1.5h.75a3 3 0 013 3v11.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V7.5a3 3 0 013-3H6V3a.75.75 0 01.75-.75zM5.25 6.75c-.621 0-1.125.504-1.125 1.125V18a1.125 1.125 0 001.125 1.125h13.5A1.125 1.125 0 0019.875 18V7.875c0-.621-.504-1.125-1.125-1.125H5.25z" clip-rule="evenodd" class="svelte-1d7fo4d"></path><path d="M10.5 9.75a.75.75 0 00-1.5 0v.01c0 .414.336.75.75.75H10.5v-.01a.75.75 0 000-1.5zM10.5 12.75a.75.75 0 00-1.5 0v.01c0 .414.336.75.75.75H10.5v-.01a.75.75 0 000-1.5zM10.5 15.75a.75.75 0 00-1.5 0v.01c0 .414.336.75.75.75H10.5v-.01a.75.75 0 000-1.5zM13.5 9.75a.75.75 0 00-1.5 0v.01c0 .414.336.75.75.75H13.5v-.01a.75.75 0 000-1.5zM13.5 12.75a.75.75 0 00-1.5 0v.01c0 .414.336.75.75.75H13.5v-.01a.75.75 0 000-1.5zM13.5 15.75a.75.75 0 00-1.5 0v.01c0 .414.336.75.75.75H13.5v-.01a.75.75 0 000-1.5zM16.5 9.75a.75.75 0 00-1.5 0v.01c0 .414.336.75.75.75H16.5v-.01a.75.75 0 000-1.5zM16.5 12.75a.75.75 0 00-1.5 0v.01c0 .414.336.75.75.75H16.5v-.01a.75.75 0 000-1.5zM16.5 15.75a.75.75 0 00-1.5 0v.01c0 .414.336.75.75.75H16.5v-.01a.75.75 0 000-1.5z" class="svelte-1d7fo4d"></path></svg> <span class="svelte-1d7fo4d">Calendar</span></a> <a href="/workspace"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 svelte-1d7fo4d" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.098a2.25 2.25 0 0 1-2.25 2.25h-12a2.25 2.25 0 0 1-2.25-2.25V14.15M18 18.75h.75A2.25 2.25 0 0 0 21 16.5v-1.5a2.25 2.25 0 0 0-2.25-2.25h-15A2.25 2.25 0 0 0 1.5 15v1.5A2.25 2.25 0 0 0 3.75 18.75H4.5M12 12.75a3 3 0 0 0-3-3H5.25V7.5a3 3 0 0 1 3-3h7.5a3 3 0 0 1 3 3v2.25H15a3 3 0 0 0-3 3Z" class="svelte-1d7fo4d"></path></svg> <span class="svelte-1d7fo4d">Workspace</span></a> <a href="/ai-chat"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 svelte-1d7fo4d" aria-hidden="true"><path d="M12.001 2.504a2.34 2.34 0 00-2.335 2.335v.583c0 .582.212 1.13.582 1.556l.03.035-.03.034a2.34 2.34 0 00-2.917 3.916A3.287 3.287 0 004.08 14.25a3.287 3.287 0 003.287 3.287h8.266a3.287 3.287 0 003.287-3.287 3.287 3.287 0 00-1.253-2.583 2.34 2.34 0 00-2.917-3.916l-.03-.034.03-.035c.37-.425.582-.973.582-1.555v-.583a2.34 2.34 0 00-2.335-2.336h-.002zM9.75 12.75a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-4.5z" class="svelte-1d7fo4d"></path><path fill-rule="evenodd" d="M12 1.5c5.79 0 10.5 4.71 10.5 10.5S17.79 22.5 12 22.5 1.5 17.79 1.5 12 6.21 1.5 12 1.5zM2.85 12a9.15 9.15 0 019.15-9.15 9.15 9.15 0 019.15 9.15 9.15 9.15 0 01-9.15 9.15A9.15 9.15 0 012.85 12z" clip-rule="evenodd" class="svelte-1d7fo4d"></path></svg> <span class="svelte-1d7fo4d">Ask Synthia</span></a></nav></div> <button><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 svelte-1d7fo4d" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9" class="svelte-1d7fo4d"></path></svg> <span class="svelte-1d7fo4d">Log out</span></button></div>'),oa=Re('<path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 0-.103.103l1.132 1.132a.75.75 0 0 0 1.06 0l1.132-1.132a.75.75 0 0 0-.103-1.06l-1.132-1.132a.75.75 0 0 0-1.06 0L9.63 1.615a.75.75 0 0 0-.102.103ZM12 3.75a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5a.75.75 0 0 1 .75-.75ZM18.282 5.282a.75.75 0 0 0-1.06 0l-1.132 1.132a.75.75 0 0 0 .103 1.06l1.132 1.132a.75.75 0 0 0 1.06 0l1.132-1.132a.75.75 0 0 0-.103-1.06l-1.132-1.132a.75.75 0 0 0 0-.103ZM19.5 12a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 .75.75ZM18.282 18.718a.75.75 0 0 0 0 1.06l1.132 1.132a.75.75 0 0 0 1.06 0l1.132-1.132a.75.75 0 0 0-.103-1.06l-1.132-1.132a.75.75 0 0 0-1.06 0l-1.132 1.132a.75.75 0 0 0 .103.103ZM12 18.75a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 .75.75ZM5.718 18.718a.75.75 0 0 0 1.06 0l1.132-1.132a.75.75 0 0 0-.103-1.06l-1.132-1.132a.75.75 0 0 0-1.06 0L4.586 17.686a.75.75 0 0 0 .103 1.06l1.132 1.132a.75.75 0 0 0 0 .103ZM4.5 12a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM5.718 5.282a.75.75 0 0 0 0-1.06l-1.132-1.132a.75.75 0 0 0-1.06 0L2.39 4.114a.75.75 0 0 0 .103 1.06l1.132 1.132a.75.75 0 0 0 1.06 0l1.132-1.132a.75.75 0 0 0-.103-.103ZM12 6.75a5.25 5.25 0 0 1 5.25 5.25 5.25 5.25 0 0 1-5.25 5.25 5.25 5.25 0 0 1-5.25-5.25 5.25 5.25 0 0 1 5.25-5.25Z" clip-rule="evenodd" class="svelte-1d7fo4d"></path>'),sa=Re('<path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM12 16.5a4.5 4.5 0 1 1 0-9 4.5 4.5 0 0 1 0 9Z" clip-rule="evenodd" class="svelte-1d7fo4d"></path>'),ra=E("<p> </p>"),la=E("<p> </p>"),da=E(`<div><!> <!> <div class="flex-1 flex flex-col overflow-hidden svelte-1d7fo4d"><header><div class="header-left svelte-1d7fo4d"><button id="hamburgerButton" class="menu-btn svelte-1d7fo4d" aria-label="Toggle Sidebar"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 svelte-1d7fo4d"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" class="svelte-1d7fo4d"></path></svg></button> <a href="/home" class="logo svelte-1d7fo4d"><img src="/logonamin.png" alt="Microtask Logo" class="h-8 w-auto svelte-1d7fo4d"> <span>Microtask</span></a></div> <div class="header-icons svelte-1d7fo4d"><div class="relative svelte-1d7fo4d"><button id="bellIcon" aria-label="Notifications" class="svelte-1d7fo4d"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 svelte-1d7fo4d" aria-hidden="true"><path fill-rule="evenodd" d="M5.25 9a6.75 6.75 0 0113.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 01-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 11-7.48 0c-1.673-.253-3.287-.673-4.831-1.243a.75.75 0 01-.297-1.206C4.45 13.807 5.25 11.873 5.25 9.75V9zm4.502 8.9a2.25 2.25 0 104.496 0H9.752z" clip-rule="evenodd" class="svelte-1d7fo4d"></path></svg></button> <div id="notifWindow"><h3 class="font-semibold mb-2 text-sm svelte-1d7fo4d">Notifications</h3><p class="text-xs svelte-1d7fo4d">No new notifications.</p></div></div> <div class="relative svelte-1d7fo4d"><button id="helpIcon" aria-label="Help &amp; FAQ" class="svelte-1d7fo4d"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 svelte-1d7fo4d" aria-hidden="true"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.042.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd" class="svelte-1d7fo4d"></path></svg></button> <div id="helpWindow"><h3 class="font-semibold mb-2 text-sm svelte-1d7fo4d">FAQ</h3> <ul class="list-disc list-inside space-y-1 text-xs svelte-1d7fo4d"><li class="svelte-1d7fo4d">How do I add a task?</li><li class="svelte-1d7fo4d">Where is the calendar?</li></ul> <a href="/support" class="text-xs text-blue-600 hover:underline mt-2 block svelte-1d7fo4d">Visit Support</a></div></div> <div class="relative svelte-1d7fo4d"><button id="profileIcon" aria-label="Profile Menu" class="svelte-1d7fo4d"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 svelte-1d7fo4d" aria-hidden="true"><path fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clip-rule="evenodd" class="svelte-1d7fo4d"></path></svg></button> <div id="profileWindow"><h3 class="font-semibold mb-2 text-sm svelte-1d7fo4d">Profile</h3> <p class="text-xs mb-2 truncate svelte-1d7fo4d"> </p> <a href="/settings">Settings</a> <button>Logout</button></div></div> <button id="darkModeToggle" aria-label="Toggle Dark Mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 svelte-1d7fo4d"><!></svg></button></div></header> <div class="flex-1 overflow-y-auto pt-[60px] flex flex-col custom-scrollbar svelte-1d7fo4d"><div class="settings-page svelte-1d7fo4d"><h1 class="svelte-1d7fo4d">Account Settings</h1> <section class="settings-section svelte-1d7fo4d"><h2 class="svelte-1d7fo4d">Profile Information</h2> <p class="welcome-message svelte-1d7fo4d"> </p> <div class="profile-form-grid svelte-1d7fo4d"><div class="form-group profile-picture-group svelte-1d7fo4d"><label for="profilePictureInput" class="svelte-1d7fo4d">Profile Picture</label> <div class="profile-picture-controls svelte-1d7fo4d"><img alt="Profile Preview" class="profile-preview svelte-1d7fo4d"> <input type="file" id="profilePictureInput" accept="image/*" style="display: none;" class="svelte-1d7fo4d"> <label for="profilePictureInput" class="button button-secondary upload-button svelte-1d7fo4d" role="button" tabindex="0">Choose Image</label></div></div> <div class="form-group full-width-profile-field svelte-1d7fo4d"><label for="displayNameInput" class="svelte-1d7fo4d">Display Name</label> <input type="text" id="displayNameInput" placeholder="Your public display name" class="svelte-1d7fo4d"></div></div> <button class="button button-primary svelte-1d7fo4d"><!></button> <!></section> <section class="settings-section danger-zone svelte-1d7fo4d"><h2 class="svelte-1d7fo4d">Account Deletion</h2> <p class="danger-text svelte-1d7fo4d">Permanently delete your account and all associated data. This action cannot be undone. 
            Please be absolutely sure before proceeding.</p> <button class="button button-danger svelte-1d7fo4d"><!></button> <!></section> <footer class="settings-footer svelte-1d7fo4d"> </footer></div></div></div></div>`);function Ma(je,de){Ht(de,!1);const[We,qe]=Tt(),c=()=>Zt(Nt,"$page",We);let W=u(!1),x=u("User"),a=u(!1),I=u(null),M=Et(de,"data",8),y=null,p=u(""),T="",A=null,P=null,D=u("https://via.placeholder.com/150/CCCCCC/808080?Text=Avatar"),H=u(!1),h=u(""),_=u(""),Z=u(!1),b=u(""),U=u("");async function Oe(t){o(H,!0),o(h,"");try{y=t.uid,o(x,t.displayName||"User"),o(p,t.displayName||""),T=e(p),P=t.photoURL,o(D,t.photoURL||"https://via.placeholder.com/150/CCCCCC/808080?Text=Avatar");const s=re(le,"credentials",t.uid),n=await Ot(s);if(n.exists()){const v=n.data()}}catch(s){console.error("Error loading profile:",s),o(h,"Failed to load profile information."),o(_,"error")}finally{o(H,!1)}}function Ge(t){var v;const n=(v=t.target.files)==null?void 0:v[0];if(n){A=n;const g=new FileReader;g.onload=f=>{var k;(k=f.target)!=null&&k.result&&o(D,f.target.result)},g.readAsDataURL(n),o(h,"")}}async function Ye(){if(!y||!w.currentUser){o(h,"User not authenticated. Please refresh."),o(_,"error");return}if(!e(p).trim()){o(h,"Display Name cannot be empty."),o(_,"error");return}if(e(p)===T&&!A){o(h,"No changes to save."),o(_,"");return}o(H,!0),o(h,""),o(_,"");try{let t=P;if(A){const n=`profilePictures/${y}/${A.name}_${Date.now()}`,v=Fe(Ne,n),g=await Gt(v,A);t=await Yt(g.ref)}await Kt(w.currentUser,{displayName:e(p),photoURL:t});const s=re(le,"credentials",y);await Qt(s,{username:e(p),photoURL:t,uid:y},{merge:!0}),o(x,e(p)),T=e(p),P=t,o(D,t||"https://via.placeholder.com/150/CCCCCC/808080?Text=Avatar"),A=null,jt&&ie(e(x)),o(h,"Profile updated successfully!"),o(_,"success")}catch(t){console.error("Error updating profile:",t),o(h,`Failed to update profile: ${t.message||"Unknown error"}`),o(_,"error")}finally{o(H,!1)}}async function Ke(){if(!y||!w.currentUser){o(b,"User not authenticated. Please refresh."),o(U,"error");return}if(!confirm("Are you absolutely sure you want to delete your account and all associated data? This action is permanent and cannot be undone.")){o(b,"Account deletion cancelled."),o(U,"");return}o(Z,!0),o(b,""),o(U,"");try{const t=re(le,"credentials",y);if(await Jt(t),P&&P.includes("firebasestorage.googleapis.com"))try{const s=Fe(Ne,P);await Xt(s)}catch(s){console.warn("Could not delete profile picture from storage:",s)}await ea(w.currentUser),o(b,"Account deleted successfully. You will be logged out."),o(U,"success"),setTimeout(()=>{q()},2500)}catch(t){console.error("Error deleting account:",t),o(b,`Failed to delete account: ${t.message||"Unknown error"}`),t.code==="auth/requires-recent-login"&&o(b,e(b)+" This operation is sensitive. Please log out, log back in, then try again."),o(U,"error")}finally{o(Z,!1)}}function Qe(){}function Je(){o(W,!e(W))}function ne(){return localStorage.getItem("microtask_global_username")||"User"}function ie(t){localStorage.setItem("microtask_global_username",t)}function q(){w.signOut().then(()=>{ie("User"),Rt("/login")}).catch(t=>{console.error("Logout failed:",t),o(I,"Logout failed. Please try again.")})}const ce=t=>{};Ft(()=>{var g;const t=qt(w,async f=>{f?await Oe(f):(y=null,o(x,ne()),o(p,""),T="",o(D,"https://via.placeholder.com/150/CCCCCC/808080?Text=Avatar"),c().url.pathname.includes("/settings"))});{const f=localStorage.getItem("theme"),k=window.matchMedia("(prefers-color-scheme: dark)").matches;o(a,f==="dark"||!f&&k),document.body.classList.toggle("dark",e(a)),!w.currentUser&&!((g=M())!=null&&g.username)&&o(x,ne())}const s=(f,k)=>{const $=document.getElementById(f);$&&$.addEventListener("click",R=>{R.stopPropagation()})};s("bellIcon"),s("helpIcon"),s("profileIcon");const n=document.getElementById("darkModeToggle");n&&n.addEventListener("click",Qe);const v=f=>{};return document.addEventListener("click",v),document.addEventListener("keydown",ce),()=>{t(),document.removeEventListener("click",v),document.removeEventListener("keydown",ce)}}),Ee(()=>(Ze(M()),w),()=>{var t;(t=M())!=null&&t.username&&!w.currentUser&&o(x,M().username)}),Ee(()=>Ze(M()),()=>{var t;(t=M())!=null&&t.error&&o(I,M().error)}),Ut(),Bt();var F=da(),ve=l(F);{var Xe=t=>{var s=ta(),n=r(l(s),2),v=l(n,!0);d(n);var g=r(n,2);d(s),B(()=>L(v,e(I))),z("click",g,()=>o(I,null)),m(t,s)};C(ve,t=>{e(I)&&t(Xe)})}var fe=r(ve,2);{var et=t=>{var s=aa(),n=l(s),v=l(n),g=r(l(v),2);d(v);var f=r(v,2),k=l(f);let $;var R=r(k,2);let Pe;var He=r(R,2);let Ue;var Le=r(He,2);let Ie;var De=r(Le,2);let Se;var yt=r(De,2);let Ve;d(f),d(n);var $e=r(n,2);let Be;d(s),B((_t,kt,zt,Mt,Ct,At,Pt)=>{i(s,1,`fixed top-0 left-0 h-full w-64 shadow-lg z-50 flex flex-col justify-between p-4 border-r ${e(a)?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"}`,"svelte-1d7fo4d"),i(v,1,`flex items-center gap-2 mb-8 pb-4 border-b $${(e(a)?"border-zinc-700":"border-gray-200")??""}`,"svelte-1d7fo4d"),i(g,1,`text-xl font-bold ${e(a)?"text-zinc-100":"text-gray-800"}`,"svelte-1d7fo4d"),$=i(k,1,"flex items-center gap-3 px-3 py-2 rounded-md font-semibold transition-colors duration-150 svelte-1d7fo4d",null,$,_t),Pe=i(R,1,"flex items-center gap-3 px-3 py-2 rounded-md font-semibold transition-colors duration-150 svelte-1d7fo4d",null,Pe,kt),Ue=i(He,1,"flex items-center gap-3 px-3 py-2 rounded-md font-semibold transition-colors duration-150 svelte-1d7fo4d",null,Ue,zt),Ie=i(Le,1,"flex items-center gap-3 px-3 py-2 rounded-md font-semibold transition-colors duration-150 svelte-1d7fo4d",null,Ie,Mt),Se=i(De,1,"flex items-center gap-3 px-3 py-2 rounded-md font-semibold transition-colors duration-150 svelte-1d7fo4d",null,Se,Ct),Ve=i(yt,1,"flex items-center gap-3 px-3 py-2 rounded-md font-semibold transition-colors duration-150 svelte-1d7fo4d",null,Ve,At),Be=i($e,1,"flex items-center gap-3 px-3 py-2 rounded-md font-semibold w-full mt-auto transition-colors duration-150 svelte-1d7fo4d",null,Be,Pt)},[()=>({"text-gray-700":!e(a),"text-zinc-300":e(a),"hover:bg-gray-100":!e(a),"hover:bg-zinc-700":e(a),"bg-blue-600":c().url.pathname==="/home"&&!e(a),"bg-blue-800":c().url.pathname==="/home"&&e(a),"text-white":c().url.pathname==="/home"}),()=>({"text-gray-700":!e(a),"text-zinc-300":e(a),"hover:bg-gray-100":!e(a),"hover:bg-zinc-700":e(a),"bg-blue-600":c().url.pathname==="/dashboard"&&!e(a),"bg-blue-800":c().url.pathname==="/dashboard"&&e(a),"text-white":c().url.pathname==="/dashboard"}),()=>({"text-gray-700":!e(a),"text-zinc-300":e(a),"hover:bg-gray-100":!e(a),"hover:bg-zinc-700":e(a),"bg-blue-600":c().url.pathname==="/tasks"&&!e(a),"bg-blue-800":c().url.pathname==="/tasks"&&e(a),"text-white":c().url.pathname==="/tasks"}),()=>({"text-gray-700":!e(a),"text-zinc-300":e(a),"hover:bg-gray-100":!e(a),"hover:bg-zinc-700":e(a),"bg-blue-600":c().url.pathname==="/calendar"&&!e(a),"bg-blue-800":c().url.pathname==="/calendar"&&e(a),"text-white":c().url.pathname==="/calendar"}),()=>({"text-gray-700":!e(a),"text-zinc-300":e(a),"hover:bg-gray-100":!e(a),"hover:bg-zinc-700":e(a),"bg-blue-600":c().url.pathname==="/workspace"&&!e(a),"bg-blue-800":c().url.pathname==="/workspace"&&e(a),"text-white":c().url.pathname==="/workspace"}),()=>({"text-gray-700":!e(a),"text-zinc-300":e(a),"hover:bg-gray-100":!e(a),"hover:bg-zinc-700":e(a),"bg-blue-600":c().url.pathname==="/ai-chat"&&!e(a),"bg-blue-800":c().url.pathname==="/ai-chat"&&e(a),"text-white":c().url.pathname==="/ai-chat"}),()=>({"hover:bg-gray-100":!e(a),"hover:bg-zinc-700":e(a),"text-gray-700":!e(a),"text-zinc-300":e(a)})],Te),z("click",$e,q),Vt(3,s,()=>$t,()=>({x:-300,duration:300,easing:Wt})),m(t,s)};C(fe,t=>{e(W)&&t(et)})}var ue=r(fe,2),N=l(ue),O=l(N),pe=l(O),he=r(pe,2),tt=r(l(he),2);d(he),d(O);var ge=r(O,2),G=l(ge),at=r(l(G),2);d(G);var Y=r(G,2),ot=r(l(Y),2);d(Y);var K=r(Y,2),Q=r(l(K),2),J=r(l(Q),2),st=l(J);d(J);var me=r(J,2),be=r(me,2);d(Q),d(K);var X=r(K,2),we=l(X),rt=l(we);{var lt=t=>{var s=oa();m(t,s)},dt=t=>{var s=sa();m(t,s)};C(rt,t=>{e(a)?t(lt):t(dt,!1)})}d(we),d(X),d(ge),d(N);var xe=r(N,2),ye=l(xe),ee=r(l(ye),2),te=r(l(ee),2),nt=l(te);d(te);var ae=r(te,2),oe=l(ae),_e=r(l(oe),2),ke=l(_e),ze=r(ke,2),it=r(ze,2);d(_e),d(oe);var Me=r(oe,2),Ce=r(l(Me),2);St(Ce),d(Me),d(ae);var S=r(ae,2),ct=l(S);{var vt=t=>{var s=j("Saving...");m(t,s)},ft=t=>{var s=j("Save Profile Info");m(t,s)};C(ct,t=>{e(H)?t(vt):t(ft,!1)})}d(S);var ut=r(S,2);{var pt=t=>{var s=ra(),n=l(s,!0);d(s),B(()=>{i(s,1,`message ${e(_)??""}`,"svelte-1d7fo4d"),L(n,e(h))}),m(t,s)};C(ut,t=>{e(h)&&t(pt)})}d(ee);var se=r(ee,2),V=r(l(se),4),ht=l(V);{var gt=t=>{var s=j("Deleting...");m(t,s)},mt=t=>{var s=j("Delete My Account");m(t,s)};C(ht,t=>{e(Z)?t(gt):t(mt,!1)})}d(V);var bt=r(V,2);{var wt=t=>{var s=la(),n=l(s,!0);d(s),B(()=>{i(s,1,`message ${e(U)??""}`,"svelte-1d7fo4d"),L(n,e(b))}),m(t,s)};C(bt,t=>{e(b)&&t(wt)})}d(se);var Ae=r(se,2),xt=l(Ae);d(Ae),d(ye),d(xe),d(ue),d(F),B(t=>{i(F,1,`flex h-screen font-sans ${e(a)?"dark bg-zinc-900 text-zinc-300":"bg-gray-100 text-gray-800"}`,"svelte-1d7fo4d"),i(N,1,`top-header ${e(a)?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"}`,"svelte-1d7fo4d"),i(tt,1,`${e(a)?"text-zinc-100":"text-gray-800"}`,"svelte-1d7fo4d"),i(at,1,`dropdown-window hidden ${e(a)?"bg-zinc-700 border-zinc-600 text-zinc-300":"bg-white border-gray-200 text-gray-700"}`,"svelte-1d7fo4d"),i(ot,1,`dropdown-window hidden ${e(a)?"bg-zinc-700 border-zinc-600 text-zinc-300":"bg-white border-gray-200 text-gray-700"}`,"svelte-1d7fo4d"),i(Q,1,`dropdown-window hidden ${e(a)?"bg-zinc-700 border-zinc-600 text-zinc-300":"bg-white border-gray-200 text-gray-700"}`,"svelte-1d7fo4d"),L(st,`Welcome, ${e(x)||"User"}!`),i(me,1,`block text-xs px-2 py-1.5 rounded w-full text-left mb-1 transition-colors duration-150 ${e(a)?"bg-zinc-600 hover:bg-zinc-500 text-zinc-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,"svelte-1d7fo4d"),i(be,1,`text-xs px-2 py-1.5 rounded w-full text-left transition-colors duration-150 ${e(a)?"bg-red-700 hover:bg-red-600 text-zinc-300":"bg-red-100 hover:bg-red-200 text-red-700"}`,"svelte-1d7fo4d"),i(X,1,`ml-2 p-1.5 rounded-full transition-colors duration-150 ${e(a)?"hover:bg-zinc-700 text-zinc-300":"hover:bg-gray-100 text-gray-700"}`,"svelte-1d7fo4d"),L(nt,`Welcome, ${e(x)||"User"}!`),Dt(ke,"src",e(D)),S.disabled=e(H),V.disabled=e(Z),L(xt,`Microtask Â© ${t??""}`)},[()=>new Date().getFullYear()],Te),z("click",pe,Je),z("click",be,q),z("change",ze,Ge),z("keypress",it,t=>{var s;(t.key==="Enter"||t.key===" ")&&((s=document.getElementById("profilePictureInput"))==null||s.click())}),It(Ce,()=>e(p),t=>o(p,t)),z("click",S,Ye),z("click",V,Ke),m(je,F),Lt(),qe()}export{Ma as component};
